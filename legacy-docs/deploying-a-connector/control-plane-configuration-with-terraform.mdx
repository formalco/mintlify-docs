---
title: "Control Plane Configuration with Terraform"
---


How to configure a Connector with Terraform?

Deploying Formal Connector entirely via Terraform streamlines the integration of Formal into your infrastructure, allowing for automated management and deployment. This guide provides examples and best practices for deploying Formal Connector using Terraform.

## Prerequisites

- Terraform installed on your machine.
- Access to a Formal account with permissions to deploy Connectors.
- An understanding of your target environment (AWS, GCP, Azure, etc.).

## Deployment example

The following example demonstrates how to deploy a Connector linked to all PostgreSQL resources:

```hcl Terraform
terraform {
  required_providers {
    formal = {
      source  = "formalco/formal"
      version = "4.6.2"
    }
  }

  required_version = ">= 0.14.9"
}

provider "formal" {
  api_key = var.formal_api_key
}

resource "formal_connector" "main" {
  name = var.name
}

resource "formal_connector_listener" "postgres_listener" {
  name = var.connector_postgres_listener_name
  port = var.connector_postgres_listener_port
}

resource "formal_connector_listener_rule" "postgres_rule" {
  connector_listener_id = formal_connector_listener.postgres_listener.id
  type                  = "technology"
  rule                  = "postgres"
}

resource "formal_connector_listener_link" "postgres_link" {
  connector_id          = formal_connector.main.id
  connector_listener_id = formal_connector_listener.postgres_listener.id
}
```

<Warning>
Since the connector runs a healthcheck service on port 8080, you cannot create a listener resource on that port. The terraform
provider will error out if you try to do so.
</Warning>

## Terraform provider documentation

The complete Terraform provider documentation is available in the [Terraform Registry](https://registry.terraform.io/providers/formalco/formal/latest/docs).
