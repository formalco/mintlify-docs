---
title: 'How to mask data in JSON Object?'
---


Formal supports the masking of JSON Object.
This guide outlines the process for masking JSON objects, a feature supported by Formal. Masking sensitive information ensures data privacy and compliance with security standards.

## Supported Resources
- HTTP
- Postgres
- MySQL
- S3
- DynamoDB
- Snowflake

### HTTP

To mask JSON payloads within the HTTP proxy, you can apply a policy to the `json_path` column. Consider the following example payload:
{/* cSpell:ignore PWEA */}
```
{
    "object": "list",
    "data": [
        {
            "id": "cus_PWuVxo1rrWtvPW",
            "object": "customer",
            "email": "john.doe@joinformal.com"
        },
        {
            "id": "cus_PWYxZwFfW9UEbR",
            "object": "customer",
            "email": "marc.doe@joinformal.com"
        },
        {
            "id": "cus_PWEAQhc9wwcWIu",
            "object": "customer",
            "email": "stephen.doe@joinformal.com"
        }
    ]
}
```

To mask email addresses in this payload, apply the following policy:
```rego
package formal.v2

import future.keywords.if

post_request := { "action": "mask", "type": "redact.constant_characters", "redact": "[EMAIL]", "columns": columns } if {
    columns := [col | col := input.row[_]; regex.match("data.*.email", col["json_path"])]
}
```

This policy redacts email addresses, producing the output:
```
{
    "object": "list",
    "data": [
        {
            "id": "cus_PWuVxo1rrWtvPW",
            "object": "customer",
            "email": "[EMAIL]"
        },
        {
            "id": "cus_PWYxZwFfW9UEbR",
            "object": "customer",
            "email": "[EMAIL]"
        },
        {
            "id": "cus_PWEAQhc9wwcWIu",
            "object": "customer",
            "email": "[EMAIL]"
        }
    ]
}
```

### Postgres Proxy

For the Postgres Proxy, the process masks not only direct column names such as email but also those within JSONB columns. The following policy demonstrates how to achieve this:

```rego
package formal.v2

import future.keywords.if

post_request := { "action": "mask", "type": "redact.partial", "sub_type": "email_mask_username", "columns": columns, "typesafe": "fallback_to_default" } if {
    columns := [col | col := input.row[_]; col["name"] == "email"]
}
```

Applying this policy results in masked email addresses, including those within JSONB columns:
| Id                 | Data                                                                         | Email                        |
| ------------------ | ---------------------------------------------------------------------------- | ---------------------------- |
| 1   | \{"id": "cus_PWuVxo1rrWtvPW", "object": "customer", "email": "************@joinformal.com"\} | ************@joinformal.com  |