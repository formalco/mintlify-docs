---
title: "Desktop App"
description: "Streamline resource access with the Formal Desktop App and CLI"
icon: "desktop"
---

## Overview

The Formal Desktop App simplifies connecting to protected resources by automating authentication and connection management. It's available for macOS and Linux and includes a powerful CLI.

## Installation

Download the app for your platform:

<CardGroup cols={3}>
  <Card
    title="macOS"
    icon="apple"
    href="https://static-assets.formalcloud.net/desktop-app/darwin/formal.pkg"
  >
    Download .pkg installer
  </Card>
  <Card
    title="Ubuntu/Debian (x86_64)"
    icon="ubuntu"
    href="https://static-assets.formalcloud.net/desktop-app/linux/formal-desktop_0.1.4_amd64.deb"
  >
    Download .deb package
  </Card>
  <Card
    title="Ubuntu/Debian (ARM64)"
    icon="ubuntu"
    href="https://static-assets.formalcloud.net/desktop-app/linux/formal-desktop_0.1.4_arm64.deb"
  >
    Download .deb package
  </Card>
</CardGroup>

### macOS Installation

1. Download the `.pkg` file
2. Open the package and follow installation instructions
3. Allow requested permissions
4. Launch Formal from Spotlight or Applications

### Linux Installation

```bash
# Ubuntu/Debian
sudo apt install ./formal-desktop_0.1.4_amd64.deb

# Start the agent
systemctl start --user formal
```

### NixOS

Use the Formal overlay:

```bash
# See instructions at:
# https://github.com/formalco/formal-overlay
```

## Setup

<Steps>
  <Step title="Launch the App">
    Start Formal - you'll see the logo in your system tray
  </Step>
  <Step title="Install CLI (macOS)">
    Click the tray icon → Preferences → Install in PATH Or manually: ```bash
    sudo ln -s /Applications/Formal.app/Contents/MacOS/formal
    /usr/local/bin/formal ```
  </Step>
  <Step title="Log In">```bash formal auth login ```</Step>
  <Step title="Verify">
    ```bash formal ls ``` You should see all available resources
  </Step>
</Steps>

## CLI Reference

### Authentication

```bash
# Log in
formal auth login

# Get your credentials (for direct connections)
formal auth credentials

# Check login status
formal status
```

### List Resources

```bash
formal ls
```

Interactive TUI with:

- `↑/k` - Move up
- `↓/j` - Move down
- `enter` - Connect to resource
- `/` - Filter resources
- `q` - Quit
- `?` - Show help

### Connect to Resources

#### Databases (PostgreSQL, MySQL, MongoDB)

```bash
# Connect to a database
formal connect production-postgres

# Output:
# Connected to production-postgres on localhost:6432
```

Then connect with your database client:

```bash
# PostgreSQL
psql -h localhost -p 6432

# MySQL
mysql -h localhost -P 6432

# MongoDB
mongosh "mongodb://localhost:27017/mydb"
```

**Formal automatically injects your credentials** - no username/password needed!

#### Specify Native User

If you need to specify a different native user than the default one assign to your user, you can specify using the convention: `formal@[the_name_of_the_native_user]`. 

```bash
# PostgreSQL with specific native user
psql -h localhost -p 6432 -U formal@readonly
```

#### SSH

```bash
# List resources
formal ls
# Select an SSH resource and press enter
```

This updates your `~/.ssh/config` automatically.

#### Kubernetes

```bash
# Configure kubectl
formal ls
# Select a Kubernetes resource and press enter
```

This updates your `~/.kube/config` to route through the Connector.

### Disconnect

```bash
# Disconnect from a resource
formal disconnect production-postgres
```

### Policy Evaluation

Test policies locally:

```bash
formal policy evaluate \
  --inputs '{"user_id":"abc123"}' \
  -r session
```

### Decrypt Data

Decrypt Formal-encrypted data:

```bash
formal decrypt --ciphertext "formalencrypt:second:third:fourth:fifth"
```

### S3 Operations

The Formal `s3` command automatically routes traffic to the right Connector so your users don't have to worry about formatting the right parameters for S3.

Interact with S3 through Formal:

```bash
formal s3 ls s3://my-bucket
```

See [AWS CLI S3 commands](https://docs.aws.amazon.com/cli/latest/userguide/cli-services-s3-commands.html) for more operations.

## Device Trust

The Desktop App reports device information for policy enforcement:

- Hardware model and serial number
- OS version and security settings
- System Integrity Protection status
- Secure boot status

See [MDM Integration](/docs/guides/integrations/mdm) for device-based policies.

## Headless Mode

The Formal Desktop app supports being launched in headless mode. This can be useful in server environments without a GUI or keyring support.

To start the agent in headless mode, you can use the following command:

```bash
formal agent --headless
```

Now in a separate terminal, you can run the Formal CLI as normal to connect to resources and get credentials:

```bash
formal auth login
formal auth credentials
formal ls
formal connect [resource-name]
```

In headless mode, Formal credentials are only stored in the agent's memory. This means that you'll need to reauthenticate when restarting the agent (e.g., when the machine itself reboots).

### Using an API Key

The Formal Desktop app supports using an API key to authenticate to the control plane.

First, you will need to create an API key on the Formal Console. You can learn how to create an API key [here](/docs/api/api_key).

To start the agent with an API key, you can use the following command:

```bash
FORMAL_API_KEY=<api-key> formal agent
```

You can also run the agent in headless mode with an API key:

```bash
FORMAL_API_KEY=<api-key> formal agent --headless
```

## MDM Deployment

Deploy the Desktop App organization-wide via your MDM:

1. Download the [macOS .pkg](https://static-assets.formalcloud.net/desktop-app/darwin/formal.pkg)
2. Add as a custom app in your MDM (Jamf, Intune, etc.)
3. Push to all user devices

<Note>Need help deploying via MDM? Contact Formal support for assistance.</Note>

## Troubleshooting

<AccordionGroup>
  <Accordion title="App not running">
    **Error:** ``` WARNING: CLI cannot connect to the Formal app. Please make
    sure the Formal app is running. ``` **Solution:** 1. Check that Formal is
    visible in system tray 2. Restart the Formal app 3. On Linux: `systemctl
    start --user formal`
  </Accordion>

<Accordion title="Command not found">
  **Error:** ``` bash: formal: command not found ``` **Solution:** 1. Reinstall
  CLI: Click tray icon → Preferences → Install in PATH 2. Or create symlink
  manually (see Setup section) 3. Or add alias to `.bashrc`/`.zshrc`
</Accordion>

  <Accordion title="Connection fails">
    **Solution:** 1. Verify you're logged in: `formal status` 2. Check resource
    exists: `formal ls` 3. Ensure Connector is running 4. Check network
    connectivity
  </Accordion>
</AccordionGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="Keep App Running" icon="circle-check">
    The Desktop App must be running for CLI commands to work. Enable "Launch at
    startup" in preferences.
  </Accordion>

<Accordion title="Use Descriptive Resource Names" icon="tag">
  When connecting via `formal connect`, use tab completion to find resources
  quickly.
</Accordion>
<Accordion title="Leverage the TUI" icon="terminal">
  `formal ls` provides an interactive way to explore and connect to resources
  without memorizing names.
</Accordion>

  <Accordion title="Disconnect When Done" icon="plug">
    Always disconnect from resources when finished to free up local ports.
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Chrome Extension"
    icon="chrome"
    href="/docs/guides/client-tools/chrome-extension"
  >
    Propagate identity in web apps
  </Card>
  <Card title="MDM Policies" icon="mobile" href="/docs/guides/integrations/mdm">
    Enforce device-based access control
  </Card>
</CardGroup>
