#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-commit checks...\n"

# 1. Format and spell check staged files with lint-staged
echo "ğŸ“ Formatting and spell checking staged files..."
pnpm lint-staged
if [ $? -ne 0 ]; then
  echo "âŒ Commit aborted: Fix formatting or spelling errors"
  exit 1
fi

# 2. Check for broken links
echo "\nğŸ”— Checking for broken links..."
pnpm check-links
if [ $? -ne 0 ]; then
  echo "âŒ Commit aborted: Fix broken links before committing"
  exit 1
fi

# 3. Check for missing image assets
echo "\nğŸ–¼ï¸  Checking for missing image assets..."
pnpm check-assets
if [ $? -ne 0 ]; then
  echo "âŒ Commit aborted: Fix missing image references"
  exit 1
fi

echo "\nâœ… All pre-commit checks passed - proceeding with commit"
